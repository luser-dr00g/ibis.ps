
%
%% Output Device 
% ibisdict defs
%


% Output device is described only by its bounding box.
% As text is set on the page, the upper bound decreases so the box remains invariant.
%
/dev mark
    /size [ clippath pathbbox ]
    /bounds null
    /marksonpage false
    /pagenum 1
dicttomark def % /dev
/savebounds { dev /bounds [ x y X Y ] put } bind def
/restorebounds { dev /bounds get aload pop setbounds } bind def
/setbounds { % x y X Y  setbounds  -
    %/Y exch store /X exch store /y exch store /x exch store
    {Y X y x}{exch store}forall
} bind def
/setmargin { % pts  setmargin  -
    dev /size get aload pop
    4 index sub 4 1 roll 4 index sub 4 1 roll
    4 index add 4 1 roll 4 index add 4 1 roll
    setbounds pop savebounds
} bind def
0 setmargin % define x y X Y in ibisdict, now

/nextpage {
    showpage
    dev /marksonpage false put
    dev /pagenum inc
    restorebounds
    x Y moveto
} bind def

